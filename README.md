# Photo GIS Viewer

写真のEXIF情報から位置情報を抽出し、地図上に表示するWebアプリケーションです。

## 🚀 特徴

- **フォルダ一括処理**: フォルダ内の全ての画像を一度に処理
- **GPS位置情報表示**: EXIF情報から位置データを抽出して地図に表示
- **詳細情報表示**: 撮影日時、カメラ機種、撮影設定などを表示
- **写真プレビュー**: 地図上のマーカーから写真を直接確認
- **レスポンシブデザイン**: デスクトップ・モバイル対応

## 🛠️ 技術スタック

- **HTML5 / CSS3 / JavaScript (ES6+)**
- **Leaflet.js**: 地図表示
- **OpenStreetMap**: 地図タイル
- **ExifReader.js**: EXIF情報読み取り
- **File System Access API**: フォルダアクセス

## 📋 対応ブラウザ

**推奨ブラウザ (フォルダ選択対応):**
- Google Chrome 86+
- Microsoft Edge 86+

**その他のブラウザ:**
- Safari, Firefox では個別ファイル選択のみ対応

## 🎯 対応ファイル形式

- JPEG (.jpg, .jpeg)
- PNG (.png)
- TIFF (.tiff, .tif)

## 🚀 使用方法

### 1. アプリケーションの起動

**簡単な方法:**
```bash
# index.htmlを直接ブラウザで開く
index.html をダブルクリック
```

**代替方法（トラブル時）:**
```bash
# ローカルサーバーを起動
python -m http.server 8000
# ブラウザで http://localhost:8000 にアクセス
```

**注意:** Chrome または Edge の最新版を推奨します。

### 2. 写真フォルダの選択

1. 「📁 フォルダを選択」ボタンをクリック
2. 写真が保存されているフォルダを選択
3. アプリが自動的に画像ファイルを検索・処理

### 3. 地図での確認

- 位置情報のある写真が地図上にマーカーで表示されます
- マーカーをクリックすると写真のプレビューと詳細情報が表示されます
- 写真をクリックすると拡大表示されます

## 🔧 機能詳細

### EXIF情報の抽出

- **GPS座標**: 緯度・経度
- **撮影日時**: DateTimeOriginal, DateTime, DateTimeDigitized
- **カメラ情報**: メーカー、機種、レンズ
- **撮影設定**: 絞り、シャッタースピード、ISO、焦点距離

### 地図機能

- **マーカークラスタリング**: 多数の写真を効率的に表示
- **自動ズーム調整**: 全ての写真が見えるよう自動調整
- **ポップアップ表示**: 写真プレビューと基本情報
- **モーダル表示**: 写真の詳細情報と拡大表示

## 🛡️ プライバシーとセキュリティ

- **完全ローカル処理**: 写真はブラウザ内でのみ処理され、外部に送信されません
- **一時的なアクセス**: 選択されたフォルダへのアクセスは一時的です
- **メタデータのみ**: 位置情報とメタデータのみを使用

## 🐛 トラブルシューティング

### フォルダが選択できない

- Chrome または Edge の最新版を使用してください
- ブラウザの File System Access API が有効になっているか確認してください

### 写真が地図に表示されない

- 写真にGPS情報が含まれているか確認してください
- スマートフォンの位置情報設定が有効だったか確認してください
- 古いカメラやスキャンした写真には位置情報が含まれていません

### 処理が遅い

- 大量の写真（1000枚以上）を処理する際は時間がかかる場合があります
- ブラウザの他のタブを閉じて、メモリを確保してください

## 📝 開発・カスタマイズ

### ファイル構成

```
Photo-GIS/
├── index.html              # メインHTML
├── css/
│   └── style.css          # スタイルシート
├── js/
│   ├── app.js             # メインアプリケーション
│   ├── file-handler.js    # ファイル処理
│   ├── exif-handler.js    # EXIF情報処理
│   └── map-handler.js     # 地図操作
├── libs/                   # 外部ライブラリ
└── assets/                 # アセット（アイコンなど）
```

### カスタマイズ方法

**地図の初期位置を変更:**
```javascript
// js/map-handler.js の initializeMap() 内
const defaultView = [35.6762, 139.6503]; // 東京
```

**対応ファイル形式を追加:**
```javascript
// js/file-handler.js の constructor() 内
this.supportedFormats = ['jpg', 'jpeg', 'png', 'tiff', 'tif', 'webp'];
```

**マーカーアイコンを変更:**
```javascript
// js/map-handler.js の createPhotoMarker() 内
const photoIcon = L.divIcon({
    className: 'photo-marker',
    html: '📷', // ここを変更
    iconSize: [30, 30]
});
```

## ⚠️ 制限事項

- File System Access API対応ブラウザでのみフォルダ選択が可能
- 大量の写真（数千枚）を処理する際はブラウザのメモリ制限に注意
- 写真ファイルのサイズが大きい場合、処理に時間がかかる場合があります
- 撮影方向（コンパス方向）の情報は取得できません

## 🤝 貢献・フィードバック

バグ報告や機能提案は以下の方法で受け付けています：

1. GitHubのIssueを作成
2. プルリクエストの送信
3. メールでの連絡

## 📜 ライセンス

MIT License - 詳細はLICENSEファイルを参照してください。

## 🙏 謝辞

- [Leaflet](https://leafletjs.com/) - オープンソース地図ライブラリ
- [OpenStreetMap](https://www.openstreetmap.org/) - オープンソース地図データ
- [ExifReader](https://github.com/mattiasw/ExifReader) - EXIF情報読み取りライブラリ
- [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API) - ファイルシステムアクセス

---

## 📊 使用例

### 旅行写真の整理
- 旅行先で撮影した写真の位置を地図で確認
- 撮影場所の記録と思い出の整理

### 建築関係
- 現場写真の地理的な整理

### 研究・調査活動
- フィールドワークでの写真管理
- 地理的データの可視化

### 個人的な記録
- 散歩や登山の記録
- ペットの写真の位置記録

---

**バージョン**: 1.0.0  
**最終更新**: 2025年6月